<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.springbootrobot.dao.UserDao">

    <select id="getUserByMassage" resultType="org.example.springbootrobot.bean.User">
        SELECT * FROM users
        where username=#{username} and password =#{password}
    </select>

    <select id="getAllUser" resultType="org.example.springbootrobot.bean.User">
        SELECT * FROM users
        <if test="username != null">
            where username like #{username}
        </if>
        LIMIT #{pageStart},#{pageSize}
    </select>

    <select id="getUserCounts" resultType="java.lang.Integer">
        SELECT count(*) FROM users
        <if test="username !=null ">
            WHERE username like #{username}
        </if>
    </select>

    <select id="getUserById" resultType="org.example.springbootrobot.bean.User">
        SELECT * FROM users WHERE id = #{id}
    </select>

    <update id="resetPassword">
        UPDATE users SET password = #{password} WHERE id = #{id}
    </update>

    <insert id="addUser">
        INSERT INTO users (username, name, password, email, role_id)
        VALUES (#{username}, #{name}, #{password}, #{email}, #{role_id})
    </insert>

    <delete id="deleteUser">
        DELETE FROM users where id = #{id}
    </delete>

    <update id="updateUser">
        UPDATE users SET username = #{username}, name = #{name}, password = #{password}, email = #{email}, role_id = #{role_id}
        WHERE id = #{id}
    </update>

    <select id="countByUsername" resultType="boolean">
        SELECT COUNT(*)>0 FROM users WHERE username = #{username}
    </select>

</mapper>